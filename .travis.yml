language: ruby

rvm:
  - 2.7
  - 3.0
  - 3.1
  - 3.2
  - 3.3

install:
  - "gem uninstall -v '>= 2' -i $(rvm gemdir)@global -ax bundler || true"
  - "gem install bundler -v '< 2'"
  - "bundle install --jobs=3 --retry=3"

env:
  -
  - RACK_VERSION=2.0.0
  - RACK_VERSION=2.1.0
  - RACK_VERSION=2.2.0
  - RACK_VERSION=3.0.0
  - RAILS_VERSION=6.0.0
  - RAILS_VERSION=6.1.0
  - RAILS_VERSION=7.0.0
  - RAILS_VERSION=7.1.0
  - I18N_VERSION=1.0.0
  - I18N_VERSION=1.14.0

matrix:
  allow_failures: []

script: "bundle exec rake spec"

branches:
  only:
    - master
